{"version":3,"sources":["ImageInfo/ImageInfo.module.css","Modal/Modal.module.css","Button/Button.module.css","Searchbar/Searchbar.js","ImageGallery/ImageGallery.js","Button/Button.js","Modal/Modal.js","ImageInfo/ImageInfo.js","App.js","index.js","Searchbar/Searchbar.module.css","ImageGallery/ImageGallery.module.css"],"names":["module","exports","Searchbar","onSubmit","useState","query","setQuery","className","s","Searchbar__header","SearchForm","e","preventDefault","trim","toast","error","type","SearchFormButton","SearchFormButton__label","SearchForm__input","name","value","onChange","event","currentTarget","toLowerCase","placeholder","ImageGallery","state","showModal","this","props","photo","map","id","tags","webformatURL","largeImageURL","ImageGalleryItem","datalarge","onClick","onImgClick","ImageGalleryItemImage","src","alt","Component","Button","BtnLoadMore","modalRoot","document","querySelector","Modal","modalUrl","onClose","useEffect","window","addEventListener","handleKeyDown","removeEventListener","code","handleBackdropClick","target","console","log","createPortal","Modal__backdrop","Modal__content","Status","ImageInfo","setPhoto","status","setStatus","page","setPage","setShowModal","setModalUrl","fetch","then","respons","json","hits","catch","toggleModal","prev","status__message","length","url","getAttribute","newPhoto","prevState","App","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f5895695.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"status__message\":\"ImageInfo_status__message__19JVQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Modal__backdrop\":\"Modal_Modal__backdrop__3dX1j\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"BtnLoadMore\":\"Button_BtnLoadMore__1ph3-\",\"ButtonLoadMore\":\"Button_ButtonLoadMore__1_dVw\"};","import { useState } from 'react';\nimport { toast } from 'react-toastify';\nimport s from './Searchbar.module.css';\n// import { ImSearch } from 'react-icons.in';\nimport PropTypes from 'prop-types';\n\nexport default function Searchbar({ onSubmit }) {\n  // static propTypes = {\n  //   onSubmit: PropTypes.func,\n  // };\n  // state = {\n  //   query: '',\n  // };\n  const [query, setQuery] = useState('');\n  const handleQueryChange = event => {\n    setQuery(event.currentTarget.value.toLowerCase());\n  };\n  const handleQuerySubmit = e => {\n    e.preventDefault();\n    if (query.trim() === '') {\n      toast.error('enter the queryn');\n      return;\n    }\n\n    onSubmit(query);\n    setQuery('');\n  };\n\n  return (\n    <header className={s.Searchbar__header}>\n      <form className={s.SearchForm} onSubmit={handleQuerySubmit}>\n        <button type=\"submit\" className={s.SearchFormButton}>\n          <span className={s.SearchFormButton__label}>Search</span>\n          {/* <ImSearch /> */}\n        </button>\n\n        <input\n          className={s.SearchForm__input}\n          type=\"text\"\n          name=\"query\"\n          value={query}\n          onChange={handleQueryChange}\n          // autoComplete=\"off\"\n          // autoFocus\n          placeholder=\"Search images and photos\"\n        />\n      </form>\n    </header>\n  );\n}\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n","import React, { Component } from 'react';\nimport s from './ImageGallery.module.css';\nimport PropTypes from 'prop-types';\n\nexport default class ImageGallery extends Component {\n  static propTypes = {\n    id: PropTypes.string,\n    tags: PropTypes.string,\n    webformatURL: PropTypes.string,\n    largeImageURL: PropTypes.string,\n    onImgClick: PropTypes.func,\n  };\n  state = {\n    showModal: false,\n  };\n\n  render() {\n    return (\n      <>\n        <ul className={s.ImageGallery}>\n          {this.props.photo.map(({ id, tags, webformatURL, largeImageURL }) => (\n            <li\n              className={s.ImageGalleryItem}\n              key={id}\n              datalarge={largeImageURL}\n              onClick={this.props.onImgClick}\n            >\n              <img\n                className={s.ImageGalleryItemImage}\n                src={webformatURL}\n                alt={tags}\n              />\n            </li>\n          ))}\n        </ul>\n      </>\n    );\n  }\n}\n","import PropTypes from 'prop-types';\nimport s from './Button.module.css';\nexport default function Button({ onClick }) {\n  return (\n    <button type=\"button\" className={s.BtnLoadMore} onClick={onClick}>\n      Load more\n    </button>\n  );\n}\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n","import { useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport s from './Modal.module.css';\nimport PropTypes from 'prop-types';\nconst modalRoot = document.querySelector('#modal-root');\n\nfunction Modal({ tags, modalUrl, onClose }) {\n  useEffect(() => {\n    window.addEventListener('keydown', handleKeyDown);\n    return window.removeEventListener('keydown', handleKeyDown);\n  });\n\n  const handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      onClose();\n    }\n  };\n  const handleBackdropClick = e => {\n    if (e.currentTarget === e.target) {\n      console.log('backdrop', e.target);\n      onClose();\n    }\n  };\n\n  return createPortal(\n    <div className={s.Modal__backdrop}>\n      <div className={s.Modal__content} onClick={handleBackdropClick}>\n        <img src={modalUrl} onClick={handleBackdropClick} alt={tags} />\n      </div>\n    </div>,\n    modalRoot,\n  );\n}\nModal.propTypes = {\n  tags: PropTypes.string.isRequired,\n  modalUrl: PropTypes.string.isRequired,\n  onClose: PropTypes.func.isRequired,\n};\n\nexport default Modal;\n\n// import React, { Component } from 'react';\n// import { createPortal } from 'react-dom';\n// import s from './Modal.module.css';\n// import PropTypes from 'prop-types';\n// const modalRoot = document.querySelector('#modal-root');\n\n// export default class Modal extends Component {\n//   static propTypes = {\n//     modalUrl: PropTypes.string,\n//   };\n//   componentDidMount() {\n//     window.addEventListener('keydown', this.handleKeyDown);\n//   }\n\n//   componentWillUnmount() {\n//     window.removeEventListener('keydown', this.handleKeyDown);\n//   }\n\n//   handleKeyDown = e => {\n//     if (e.code === 'Escape') {\n//       this.props.onClose();\n//     }\n//   };\n//   handleBackdropClick = e => {\n//     if (e.currentTarget === e.target) {\n//       console.log('backdrop', e.target);\n//       this.props.onClose();\n//     }\n//   };\n\n//   render() {\n//     return createPortal(\n//       <div className={s.Modal__backdrop}>\n//         <div className={s.Modal__content} onClick={this.handleBackdropClick}>\n//           <img\n//             src={this.props.modalUrl}\n//             onClick={this.handleBackdropClick}\n//             alt={this.props.tags}\n//           />\n//         </div>\n//       </div>,\n//       modalRoot,\n//     );\n//   }\n// }\n","import ImageGallery from 'ImageGallery';\nimport s from './ImageInfo.module.css';\nimport Button from 'Button';\nimport Modal from 'Modal';\nimport { useState, useEffect } from 'react/cjs/react.development';\n// import PropTypes from 'prop-types'\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nexport default function ImageInfo({ query }) {\n  const [photo, setPhoto] = useState([]);\n  // const [reject, setReject] = useState(0);\n  // const [error, setError] = useState(null);\n  const [status, setStatus] = useState(Status.IDLE);\n  const [page, setPage] = useState(1);\n  const [showModal, setShowModal] = useState(false);\n  const [modalUrl, setModalUrl] = useState('');\n\n  useEffect(() => {\n    if (!query) {\n      return;\n    }\n    setPage(1);\n    console.log(page);\n    setStatus(Status.PENDING);\n    fetch(\n      `https://pixabay.com/api/?image_type=photo&orientation=horizontal&per_page=12&q=${query}&page=${page}&key=23459982-aeff0c389b47d03a141af0a17`,\n    )\n      .then(respons => {\n        return respons.json();\n      })\n      .then(photo => {\n        setPhoto([...photo.hits]);\n        setPage(page => page + 1);\n        setStatus(Status.RESOLVED);\n      })\n      .catch(error => setStatus(Status.REJECTED));\n  }, [query]);\n\n  const loadMore = e => {\n    setStatus(Status.PENDING);\n    fetch(\n      `https://pixabay.com/api/?image_type=photo&orientation=horizontal&per_page=12&q=${query}&page=${page}&key=23459982-aeff0c389b47d03a141af0a17`,\n    )\n      .then(respons => {\n        return respons.json();\n      })\n      .then(\n        newPhoto => setPhoto(prevState => [...prevState, ...newPhoto.hits]),\n\n        setPage(page => page + 1),\n        setStatus(Status.RESOLVED),\n      )\n      .catch(error => setStatus(Status.REJECTED));\n    // window.scrollTo({\n    //   top: document.documentElement.scrollHeight,\n    //   behavior: 'smooth',\n    // });\n  };\n  // const toggleModal = modalUrl => {\n  //   setShowModal(( showModal ) => ({\n  //     showModal: !showModal,\n  //     modalUrl: modalUrl,\n  //   }));\n  // };\n  const toggleModal = modalUrl => {\n    setShowModal(prev => !prev);\n    setModalUrl(modalUrl);\n  };\n  const onGalleryCardClick = e => {\n    const url = e.currentTarget.getAttribute('datalarge');\n    toggleModal(url);\n  };\n\n  if (status === Status.IDLE) {\n    return <div className={s.status__message}>Please enter your search </div>;\n  }\n  if (status === Status.PENDING) {\n    return <div className={s.status__message}>loading...</div>;\n  }\n\n  if (photo.length === 0) {\n    return (\n      <div className={s.status__message}>Sorry we nothing found for you</div>\n    );\n  }\n  if (status === Status.RESOLVED) {\n    return (\n      <>\n        {showModal && <Modal onClose={toggleModal} modalUrl={modalUrl} />}\n        <ImageGallery photo={photo} onImgClick={onGalleryCardClick} />\n        {photo.length > 10 && <Button onClick={loadMore} />}\n      </>\n    );\n  }\n}\n// useEffect(() => {\n//   if (!query) {\n//     return;\n//   }\n//   setStatus(Status.PENDING);\n//   fetch(\n//     `https://pixabay.com/api/?image_type=photo&orientation=horizontal&per_page=12&q=${query}&page=${page}&key=23459982-aeff0c389b47d03a141af0a17`,\n//   )\n//     .then(respons => {\n//       return respons.json();\n//     })\n//     .then(photo => {\n//       try {\n//         if (page === 1) {\n//           setPhoto(photo.hits);\n//         } else {\n//           setPhoto(prev => [...prev, ...photo.hits]);\n//         }\n//         setPage(page => page + 1);\n//         setStatus(Status.RESOLVED);\n//       } catch {\n//         throw Error;\n//       }\n//     })\n//     .catch(error => setStatus(Status.REJECTED));\n// }, [query, page]);\n","// import React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport { useState } from 'react';\n// import PropTypes from 'prop-types';\nimport Searchbar from 'Searchbar';\nimport ImageInfo from './ImageInfo';\nexport default function App() {\n  const [query, setQuery] = useState('');\n\n  return (\n    <>\n      <Searchbar onSubmit={setQuery} />\n      <ImageInfo query={query} />\n      <ToastContainer autoClose={3000} />\n    </>\n  );\n}\n","import 'modern-normalize/modern-normalize.css';\nimport './index.css';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar__header\":\"Searchbar_Searchbar__header__cNYzy\",\"SearchForm\":\"Searchbar_SearchForm__1so_3\",\"SearchFormButton\":\"Searchbar_SearchFormButton__3FIqT\",\"SearchFormButton__label\":\"Searchbar_SearchFormButton__label__2MJO0\",\"SearchForm__input\":\"Searchbar_SearchForm__input__3TI5w\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1GJ9y\",\"ImageGalleryItem\":\"ImageGallery_ImageGalleryItem__N7Xeg\",\"ImageGalleryItemImage\":\"ImageGallery_ImageGalleryItemImage__18edq\"};"],"sourceRoot":""}